# .github/workflows/test-basic.yml
name: Test Basic Setup
 
on:
  workflow_dispatch:
 
jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
      # 完全不指定token参数，使用默认的GITHUB_TOKEN
    
    - name: Test environment
      run: |
        echo "Current repository: $GITHUB_REPOSITORY"
        echo "Current ref: $GITHUB_REF"
        echo "Working directory:"
        pwd
        ls -la
    
    - name: Test custom token
      env:
        CUSTOM_TOKEN: ${{ secrets.FIGUREYA2ACTION }}
      run: |
        if [ -z "$CUSTOM_TOKEN" ]; then
          echo "❌ FIGUREYA2ACTION secret not found"
        else
          echo "✅ FIGUREYA2ACTION secret available (length: ${#CUSTOM_TOKEN})"
        fi
    
    - name: Test GitHub API with custom token
      env:
        GITHUB_TOKEN: ${{ secrets.FIGUREYA2ACTION }}
      run: |
        curl -H "Authorization: token $GITHUB_TOKEN" \
             https://api.github.com/repos/ying-ge/FigureYa \
             | head -10
